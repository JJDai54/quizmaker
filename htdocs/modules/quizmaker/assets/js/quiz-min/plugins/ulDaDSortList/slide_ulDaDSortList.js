class ulDaDSortList extends quizPrototype{name="ulDaDSortList";build(){return this.getInnerHTML();this.boolDog=true;}getInnerHTML(){var currentQuestion=this.question;var name=this.getName();var id=this.getName();var tItems=shuffleArray(this.data.words);while(this.isListSorted(tItems)){tItems=shuffleArray(this.data.words);}const html=[];if(currentQuestion.options.title)html.push(`<span>${currentQuestion.options.title}</span><br>`);html.push(`<center><div id='${this.getId('main')}'>`);html.push(`<ul id="${id}" >`);for(var j=0;j < tItems.length;j++){html.push(`<li>${tItems[j]}</li>`);}html.push(``);html.push(`</ul>`);html.push(`</div></center>`);return html.join("\n");}initSlide(){var currentQuestion=this.question;ulDaDSortList_init_slist(document.getElementById(this.getName()));modifCSSRule(".ulDaDSortList_slist li","background",currentQuestion.options.liBgDefault);modifCSSRule(".ulDaDSortList_slist li.hint","background",currentQuestion.options.liBgDefault);modifCSSRule(".ulDaDSortList_slist li.active","background",currentQuestion.options.liBgActive);modifCSSRule(".ulDaDSortList_slist li.hover","background",currentQuestion.options.liBgHover);return true;}prepareData(){var tItems=[];var currentQuestion=this.question;var tWords=[];for(var k=0;k < currentQuestion.answers.length;k++){tWords.push(currentQuestion.answers[k].proposition);}this.data.words=tWords;}computeScoresMinMaxByProposition(){var currentQuestion=this.question;this.scoreMaxiBP=currentQuestion.points;this.scoreMiniBP=0;return true;}getScore(answerContainer){var bolOk=true;var currentQuestion=this.question;var id=this.getName();var listObj=document.getElementById(id);var tItems=this.data.words;var options=listObj.getElementsByTagName("li"),current=null;var tRep=[];for(var i=0;i < options.length;i++){this.blob("===> getScore-listSortItems:"+options[i].innerHTML+"=="+i+"=> "+tItems[i]);tRep.push(options[i].innerHTML)}var bolOk=this.isListSorted(tRep);return(bolOk)? currentQuestion.points:0;}isListSorted(tRep){var currentQuestion=this.question;var strRep=tRep.join(',');var strProposition=this.data.words.join(',');var bolOk=(strRep==strProposition);if(!bolOk && currentQuestion.options.orderStrict=="R"){tRep.reverse();var strRep=tRep.join(',');bolOk=(strRep==strProposition);}return bolOk;}getAllReponses(flag=0){var currentQuestion=this.question;var tReponses=[];var k=0;var t=[];for(var k in this.data.words){t.push([k*1+1,this.data.words[k]]);}return formatArray0(t,"-","");}reloadQuestion(){var currentQuestion=this.question;var id=this.getName();var listObj=document.getElementById(id);var tItems=shuffleArray(this.data.words);while(this.isListSorted(tItems)){tItems=shuffleArray(this.data.words);}var options=listObj.getElementsByTagName("li"),current=null;for(var i=0;i < options.length;i++){this.blob("===> getScore-listSortItems:"+options[i].innerHTML+"=="+i+"=> "+tItems[i]);options[i].innerHTML=tItems[i];}}showGoodAnswers(){var currentQuestion=this.question;var id=this.getName();var listObj=document.getElementById(id);var tItems=this.data.words;var options=listObj.getElementsByTagName("li"),current=null;for(var i=0;i < options.length;i++){this.blob("===> getScore-listSortItems:"+options[i].innerHTML+"=="+i+"=> "+tItems[i]);options[i].innerHTML=tItems[i];}}showBadAnswers(){this.reloadQuestion();}}function ulDaDSortList_init_slist(target){target.classList.add("ulDaDSortList_slist");let items=target.getElementsByTagName("li"),current=null;for(let i of items){i.draggable=true;i.ondragstart=e=>{current=i;for(let it of items){if(it!=current){it.classList.add("hint");}}};i.ondragenter=e=>{if(i!=current){i.classList.add("active");}};i.ondragleave=()=> i.classList.remove("active");i.ondragend=()=>{for(let it of items){it.classList.remove("hint");it.classList.remove("active");}};i.ondragover=e=> e.preventDefault();i.ondrop=e=>{e.preventDefault();if(i!=current){let currentpos=0,droppedpos=0;for(let it=0;it<items.length;it++){if(current==items[it]){currentpos=it;}if(i==items[it]){droppedpos=it;}}if(currentpos < droppedpos){i.parentNode.insertBefore(current,i.nextSibling);}else{i.parentNode.insertBefore(current,i);}}computeAllScoreEvent();};}}function modifCSSRule(sChemin,sPropriete,sVal){var bFind=false;var aStyleSheets=document.styleSheets;var exp_reg=new RegExp(sChemin,"gi");for(var i=0;i < aStyleSheets.length;++i){try{var aCssRules=aStyleSheets[i].cssRules;for(var j=0;j < aCssRules.length;++j){if(exp_reg.test(aCssRules[j].selectorText)){aCssRules[j].style[sPropriete]=sVal;bFind=true;}}}catch(error){console.log(error);continue}}return bFind;}