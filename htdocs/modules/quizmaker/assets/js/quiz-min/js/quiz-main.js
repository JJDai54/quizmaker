const quiz_request_keys=['uid','uname','name','email','ip','quiz_id'];var quiz_rgp=requestGetPost();const quiz_config={name:'Quizmaker',version:"5.02",date_creation:"25-01-2019",date_release:"25-03-2024",author:"J°J°D",email:"jjdelalandre@orange.fr",urlQuizImg:(quiz_execution==1)? `${quiz.url}/${quiz.folderJS}/images`:`images`,urlCommonImg:(quiz_execution==1)? `${quiz.url}/images`:`../images`,regexAllLetters:/\{[\w+\0123456789 àéèêëîïôöûüù]*\}/gi,regexAllLettersPP:/\{[\w+\0123456789 àéèêëîïôöûüù,\;\-\?\!\.\_\=\/]*\}/gi,dad_flip_img:0,dad_shift_img:1,dad_move_img:2,dad_flip_div:3,};var aze='togodo';const quiz_css={header:`item-round-top ${quiz.theme}-item-head`,navigation:`item-round-no ${quiz.theme}-item-body`,slide:`item-round-no ${quiz.theme}-item-body `,question:`item-round-no ${quiz.theme}-item-info`,proposition:`item-round-no ${quiz.theme}-item-body`,buttons:`quizButton ${quiz.theme}-item-button`,horloge:`quizHorloge ${quiz.theme}-item-button`,progressbar:`item-round-no ${quiz.theme}-item-body`,message:`item-round-no ${quiz.theme}-item-foot`,footer:`item-round-bottom ${quiz.theme}-item-head`,popup:`item-round-all ${quiz.theme}-item-body`,log:`item-round-all ${quiz.theme}-item-body`,consignes:`background:#fafadc;opacity:1;text-align:left;`};var quizard=[];const zzzz=(function theQuiz(){function togodo(){alert("togodo");return isInputOk();}function buildQuiz(){filtrerQuestions();var content=`<div id='quiz_div_main'>${getHtmlHeader()}<div id='quiz_div_body'>${getHtmlPopup()}<div id='quiz_div_all_slides' name='quiz_div_all_slides' class="${quiz_css.slide}">${getHtmlAllSlides()}</div><div id='quiz_div_navigation' class='${quiz_css.navigation}'>${getHtmlButtons()}${getProgressbarHTML()}</div></div>${getHtmlMessage()}${getHtmlFooter()}<input type='hidden' name='quiz_data' id='quiz_data0' value=''><input type='hidden' name='quiz_data' id='quiz_data1' value=''><input type='hidden' name='quiz_data' id='quiz_data2' value=''></div><br>${getHtmlLog()}`;const quizQuizmaker=document.getElementById('quiz_div_module_xoops');quizQuizmaker.innerHTML=content;pb_init(quizard.length,1);quizard.forEach((clQuestion,index)=>{clQuestion.initSlide();});}function getHtmlHeader(){var build=(quiz.showTypeQuestion)? ` [build${quiz_messages.twoPoints}${quiz.build}]`:"";return `<div id="quiz_div_header" name="quiz_div_header" class="${quiz_css.header}">${quiz.name}${build}</div>`;}function getHtmlFooter(){return `<div id="quiz_div_footer" name="quiz_div_footer" class="${quiz_css.footer}">${getVersion()}</div>`;}function getHtmlMessage(){return `<div id="quiz_div_message" name="quiz_div_message" class="${quiz_css.message}">${quiz_messages.messages}</div><div id="quiz_div_start" name="quiz_div_start" class="${quiz_css.message}"><center><br><button id="quiz_btn_startQuiz" name="quiz_btn_startQuiz" class="${quiz_css.buttons}" style="font-size:1.8em;visibility:visible;display:inline-block;z-index:9999;">${quiz_messages.btnStartQuiz}</button><button id="quiz_btn_submitAnswers" name="quiz_btn_submitAnswers" class="${quiz_css.buttons}" style="font-size:1.8em;visibility:visible;display:inline-block;z-index:9999;">${quiz_messages.btnSubmit}</button></center></div>`}function getHtmlPopup(){return `<div id="quiz_div_disabled_all" name="quiz_div_disabled_all"><div id="quiz_div_popup_main" name="quiz_div_popup_main" class="${quiz_css.popup}"><div id="quiz_div_popup_emoji" name="quiz_div_popup_emoji" class="${quiz_css.popup}"><img id="quiz_popup_emoji_icon" name="quiz_popup_emoji_icon" src="__EMOJI__" style="width:80px;margin:5px;float:left;"><br><span id="quiz_popup_emoji_text" name="quiz_popup_emoji_text">__EMOJI_TEXT__</span></div><hr class="quiz-style-two"><div id="quiz_div_popup_quest" name="quiz_div_popup_quest" class="${quiz_css.popup}">__QUESTION__</div><center><div id="quiz_div_popup_answers" name="quiz_div_popup_answers" class="${quiz_css.popup}" style="clear:both;">__ANSWERS__</div></center><div id="quiz_div_popup_points" name="quiz_div_popup_points" class="${quiz_css.popup}">__POINTS__</div><hr class="quiz-style-two"><div id="quiz_div_popup_score" name="quiz_div_popup_score" class="${quiz_css.popup}">__SCORE__</div><br><button id="btnPopContinue" class="${quiz_css.buttons}" onclick="event_hide_popup_result();">${quiz_messages.btnContinue}</button></div></div>`;}function getHtmlPopup2(){return `<div id="quiz_div_disabled_all" name="quiz_div_disabled_all"><div id="quiz_div_popup_main" name="quiz_div_popup_main" class="${quiz_css.log}"><div id="quiz_div_popup_emoji" name="quiz_div_popup_emoji" class="${quiz_css.log}"><img id="quiz_popup_emoji_icon" name="quiz_popup_emoji_icon" src="__EMOJI__" style="width:80px;margin-top:5px;"><br><span id="quiz_popup_emoji_text" name="quiz_popup_emoji_text">__EMOJI_TEXT__</span></div><hr class="quiz-style-two"><div id="quiz_div_popup_quest" name="quiz_div_popup_quest" class="${quiz_css.log}">__QUESTION__</div><center><div id="quiz_div_popup_answers" name="quiz_div_popup_answers" class="${quiz_css.log}">__ANSWERS__</div></center><div id="quiz_div_popup_points" name="quiz_div_popup_points" class="${quiz_css.log}">__POINTS__</div><hr class="quiz-style-two"><div id="quiz_div_popup_score" name="quiz_div_popup_score" class="${quiz_css.log}">__SCORE__</div><br><button id="btnPopContinue" class="${quiz_css.buttons}" onclick="event_hide_popup_result();">${quiz_messages.btnContinue}</button></div></div>`;}function getHtmlLog(){return `<br><div id="quiz_div_log" name="quiz_div_log" style="display:none;overflow-y:scroll;overflow:hidden;" class="${quiz_css.log}">${quiz_messages.showReponses}<span class="question-reponsesOk"><div id="quiz_div_answers_bottom" ></div></span></div>`;}function getHtmlButtons(){return `<div id="quiz_div_buttons" name="quiz_div_buttons"><button id="quiz_div_horloge" class="${quiz_css.horloge}">00:00</button><button id="quiz_btn_previousSlide" class="${quiz_css.buttons}">${quiz_messages.btnPrevious}</button><button id="quiz_btn_nextSlide" class="${quiz_css.buttons}">${quiz_messages.btnNext}</button><button id="quiz_btn_reload_answers" class="${quiz_css.buttons}">${quiz_messages.btnReload}</button><button id="quiz_btn_show_good_answers" class="${quiz_css.buttons}">${quiz_messages.btnAntiseche}</button><button id="quiz_btn_show_bad_answers" class="${quiz_css.buttons}" style="transform:rotate(0.5turn);">${quiz_messages.btnAntiseche}</button><button id="quiz_btn_goto_slide" class="${quiz_css.buttons}">${quiz_messages.btnGotoSlide}</button><button id="quiz_btn_goto_slide_begin" class="${quiz_css.buttons}">${quiz_messages.btnGotoSlideBegin}</button><input type="hidden" id="quiz_goto_slide" value=""></div>${getHtmlConsignesButtons()}`;}function getHtmlConsignesButtons(){var consigneWidth=300;var consigneHeight=150;var imgHeight=48;var offset1=16;var offset2=offset1*2;var consigneTop=imgHeight-offset1;switch(quiz.showConsigne){case 2:var btnPosition="top:+5px;right:5px;";var ConsignePosition=`top:+${offset2}px;left:-${consigneWidth+offset1}px;`;break;case 3:var btnPosition="bottom:+5px;right:5px;";var ConsignePosition=`top:-${consigneHeight}px;left:-${consigneWidth+offset1}px;`;break;case 4:var btnPosition="bottom:+5px;left:5px;";var ConsignePosition=`top:-${consigneHeight}px;left:${offset2}px;`;break;default:var btnPosition="top:+5px;left:5px;";var ConsignePosition=`top:+${consigneTop}px;left:${offset2}px;`;break;}return `<div id='quiz_btn_showConsigne' name='quiz_btn_showConsigne' class='quiz_infobulle' style='position:absolute;${btnPosition};' ><img src="${quiz_config.urlCommonImg}/Help.png" alt="" title="" style="max-height:48px;"/><div class="custom" width350="" style="${quiz_css.consignes};${ConsignePosition}"><span id='quiz_consignes' name='quiz_consignes' >Texte des consignes<br>Texte des consignes</span></div></div> `;}function getProgressbarHTML(){return `<div id="quiz_div_progressbar_main" name="quiz_div_progressbar_main" style="padding:0px 0px 5px 0px;"><center><div id="pb_contenair" name="pb_contenair" class='${quiz_css.navigation}'><div id="pb_text" name="pb_text" width="80px">0/0</div><div id="pb_base" name="pb_base"><div id="pb_indicator"></div></div></div></center></div>`;}function getHtmlAllSlides(){const output=[];quizard.forEach((clQuestion,index)=>{output.push(getHtmlSlide(clQuestion));});return output.join("\n");}function getHtmlSlide(clQuestion){const answers=[];var questionNumber=clQuestion.question.questionNumber;var slideNumber=clQuestion.slideNumber;statsTotal.quiz_questions=clQuestion.incremente_question(statsTotal.quiz_questions);statsTotal.quiz_score_max+=clQuestion.scoreMaxiQQ;statsTotal.quiz_score_min+=clQuestion.scoreMiniQQ;var comment1='';if(clQuestion.question.comment1){comment1=clQuestion.balises2Values(getMessage(clQuestion.question.comment1));comment1=`<hr class="quiz-style-two"><span style="color:blue;font-style:oblique;font-size:0.8em;">${comment1}</span>`;}var divPoints="";if(clQuestion.question.isQuestion==1 && quiz.showScoreMinMax==1){var forPoints=((clQuestion.scoreMiniQQ==0)? quiz_messages.forPoints0:quiz_messages.forPoints1);var divPoints=forPoints.replace("{pointsMin}",clQuestion.scoreMiniQQ).replace("{pointsMax}",clQuestion.scoreMaxiQQ);if(quiz.useTimer==1){var divChrono=`<label id="question${slideNumber}-slideTimer" class="quiz-timer">${clQuestion.question.timer}</label>`;divChrono=quiz_messages.forChrono.replace("{timer}",divChrono);divPoints+=" "+divChrono;}}else if(clQuestion.question.timer > 0 && quiz.useTimer==1 && quiz.showScoreMinMax==1){var divChrono=`<label id="question${slideNumber}-slideTimer" class="quiz-timer">${clQuestion.question.timer}</label>`;divChrono=quiz_messages.readerTimer.replace("{timer}",divChrono);divPoints+=" "+divChrono+"<br>";}var question=clQuestion.balises2Values(clQuestion.question.question,true);var title=`${divPoints}<div class="quiz-shadowbox-question" disabled>${slideNumber}${quiz_messages.twoPoints}${question}${comment1}</div>`;var output=[];var classCSS=`quiz_div_slide_main ${quiz_css.slide}`+((clQuestion.question.typeQuestion=='pageBegin')? " quiz_div_slide_begin":"");output.push(`<div id="slide[${questionNumber}]" name="slide${questionNumber}" class="${classCSS}" ><div class="quiz_slide_question_main ${quiz_css.question}"><div class="quiz_slide_question">${title}</div></div><div class="quiz_slide_propositions ${quiz_css.proposition}"><div id="${clQuestion.divMainId}" class="${clQuestion.typeName}" style='margin:auto;width:90%;'>${clQuestion.build()}</div></div></div>`);return output.join('');}function filtrerQuestions(){var newQuestions=[];var chrono=0;var slideNumber=0;var questionNumber=0;myQuestions.forEach((currentQuestion,index)=>{if(currentQuestion){var newTplClass=getTplNewClass(currentQuestion,chrono);if(newTplClass){newTplClass.slideNumber=slideNumber++;newTplClass.question.questionNumber=(newTplClass.isQuestion())?++questionNumber:0;chrono++;currentQuestion.questionNumber=chrono;quizard.push(newTplClass);for(var k=0;k < currentQuestion.answers.length;k++){currentQuestion.answers[k].proposition=decodeHTMLEntities(currentQuestion.answers[k].proposition);}}}});}function isInputOk(){var bolOk=false;const answerContainers=quizDivAllSlides.querySelectorAll('.answers');const answerContainer=answerContainers[currentSlide];currentQuestion=quizard[currentSlide];bolOk=currentQuestion.isInputOk(answerContainer,currentSlide);return bolOk;}function countInputOk(){var bolOk=false;var answerContainer;var reponses=0;quizars.forEach((currentQuestion,index)=>{answerContainer=currentQuestion.answers;bolOk=false;bolOk=currentQuestion.isInputOk(answerContainer,currentSlide);if(bolOk)reponses++;});return reponses;}function getGoodReponses(currentQuestion){let reponseOk=currentQuestion.getGoodReponses();showDiv('quiz_div_log',quiz.showLog);return reponseOk;}function getAllReponses(currentQuestion){let reponseOk="";reponseOk=currentQuestion.getAllReponses();showDiv('quiz_div_log',quiz.showLog);return reponseOk;}function getScoreMinMax(currentQuestion){score=currentQuestion.getScoreMinMax();return score;}function getAllScoreMinMax(){AllScoresMinMax={min:0,max:0};quizard.forEach((clQuestion,index)=>{var scoreMinMax=quizard.getScoreMinMax();AllScoresMinMax.max+=scoreMinMax.max;AllScoresMinMax.min+=scoreMinMax.min;});return AllScoresMinMax;}function getAllScores(allSlide=false){const answerContainers=quizDivAllSlides.querySelectorAll('.answers');var result={repondu:0,score:0,duree:0};quizard.forEach((clQuestion,index)=>{if(index <=currentSlide){result.repondu+=(clQuestion.isInputOk(answerContainers[index])? 1:0);result.score+=clQuestion.getScore()*1;if(clQuestion.isAntiseche && quiz.minusOnShowGoodAnswers!=0){result.repondu=0;result.score-=quiz.minusOnShowGoodAnswers;}};});return result;}function getStatistiques(currentQuestion=null){if(currentQuestion){statsTotal.question_number=currentQuestion.question.questionNumber;statsTotal.question_min=currentQuestion.scoreMiniBP;statsTotal.question_max=currentQuestion.scoreMaxiBP;statsTotal.question_points=currentQuestion.getScoreByProposition(0);}return statsTotal;}function submitAnswers(){currentQuestion=quizard[currentSlide];currentQuestion.submitAnswers();alert("submitAnswers");}function showResults(){var answerContainers=quizDivAllSlides.querySelectorAll('.answers');var results=getAllScores();var currentQuestion=quizard[currentSlide];if(currentQuestion.isQuestion){scoreCurrentSlide="";}else{var score=currentQuestion.getScore();var scoreMaxi=currentQuestion.scoreMaxiQQ;scoreCurrentSlide=quiz_messages.resultThisSlide.replace("{score}",score).replace("{scoreMaxi}",scoreMaxi);}statsTotal.cumul_score=results.score;statsTotal.cumul_questions=results.repondu;var exp=quiz_messages.resultOnSlide;exp=exp.replace("{reponses}",results.repondu);exp=exp.replace("{questions}",statsTotal.quiz_questions);exp=exp.replace("{points}",results.score);exp=exp.replace("{totalPoints}",statsTotal.quiz_score_max);if(quiz.showTypeQuestion)exp+=`<br><span style="font-size:1.2em;font-weight:800;">[ ${currentQuestion.question.typeQuestion}| quiz_id=${currentQuestion.question.quizId}| quest_id=${currentQuestion.question.questId}]`;quizDivMessage.innerHTML=scoreCurrentSlide+"<br>\n"+exp;}function showFinalResults(){var answerContainers=quizDivAllSlides.querySelectorAll('.answers');var results=getAllScores();statsTotal.cumul_score=results.score;statsTotal.cumul_questions=results.repondu;}function showGoodAnswers(evt){currentQuestion=quizard[currentSlide];currentQuestion.showGoodAnswers(currentQuestion,quizDivAllSlides);if(!quizard[currentSlide].isAntiseche){quizard[currentSlide].isAntiseche=true;}showSlide(currentSlide);return true;}function showBadAnswers(evt){currentQuestion=quizard[currentSlide];currentQuestion.showBadAnswers(currentQuestion,quizDivAllSlides);if(!quizard[currentSlide].isAntiseche){quizard[currentSlide].isAntiseche=true;}showSlide(currentSlide);return true;}function gotoSlide(evt){var bolOk=false;var obGotoSlide=document.getElementById("quiz_goto_slide");var exp=obGotoSlide.value;obGotoSlide.value="";if(!exp){exp=prompt(quiz_messages.numSlideToGo);}if(!exp){return;}var numSlide=parseInt(exp);if(Number.isInteger(numSlide)){showSlide(numSlide);bolOk=true;}else{for(var h=0;h<quizard.length;h++){currentQuestion=quizard[h].question;if(currentQuestion.identifiant==exp){bolOk=true;showSlide(h);break;}}}if(!bolOk){showSlide(0);}return false;}function gotoSlideBegin(evt){showSlide(0);return false;}function reloadQuestion(){currentQuestion=quizard[currentSlide];currentQuestion.reloadQuestion(quizDivAllSlides);showSlide(currentSlide);currentQuestion.setFocus();return true;}function showCurrentSlide(){showSlide_new();return true;}function showSlide(n){showSlide_new(n-currentSlide);return true;}function showNextSlide(){showSlide_new(+1);}function showPreviousSlide(){showSlide_new(-1);}function showSlide_new(offset=0){if(currentSlide > 0 && quiz.showResultPopup && offset>0)event_show_popup_result(currentSlide);var newSlide=currentSlide+offset;if(newSlide >=objAllSlides.length)newSlide=objAllSlides.length-1;if(newSlide < 0)newSlide=0;objAllSlides[currentSlide].classList.remove('quiz_div_slide_begin');objAllSlides[currentSlide].classList.remove('quiz_div_slide_question');var isNewSlide=(currentSlide!=newSlide);currentSlide=newSlide;pb_setValue(currentSlide+1);if(isNewSlide){clearInterval(idSlideTimer);statsTotal.slideTimer=0;idSlideTimer=0;quizard[currentSlide].setFocus();}var firstSlide=(currentSlide===0);var lastSlide=(currentSlide===(objAllSlides.length-1));var secondSlide=(currentSlide===1);var isQuestion=(quizard[currentSlide].isQuestion());var consigne=quizard[currentSlide].question['consigne'];if(!consigne)consigne=quiz_consignes[quizard[currentSlide].question['type']];enableButton(btnShowConsigne,((quiz.showConsigne && consigne)? 0:3));var obHelp=document.getElementById("quiz_consignes");if(obHelp)obHelp.innerHTML=consigne;if(quizard[currentSlide].question.timer > 0 && idSlideTimer==0 && quiz.useTimer &&!lastSlide){statsTotal.slideTimer=quizard[currentSlide].question.timer;btnNextSlide.innerHTML=`${quiz_messages.btnNext}(${statsTotal.slideTimer})`;idSlideTimer=setInterval(updateSlideTimer,1000);}if(quiz.showReponsesBottom)QuizDivAnswersBottom.innerHTML=getAllReponses(quizard[currentSlide]);var bolOk=isInputOk()||!quizard[currentSlide].isQuestion();var allowedGotoNextslide=(bolOk && quiz.answerBeforeNext)||!quiz.answerBeforeNext;showDiv('quiz_div_start',false);showDiv('quiz_div_message',true);if(firstSlide){showSlide_first(newSlide);}else if(lastSlide){showSlide_last(newSlide);}else if(!isQuestion){showSlide_group(newSlide,firstSlide,allowedGotoNextslide);}else{showSlide_question(newSlide,secondSlide,allowedGotoNextslide);}if(quiz.showResultAllways)showResults();if(currentSlide==1 && quiz.showReponsesBottom)updateOptions();}function showSlide_first(newSlide){objAllSlides[newSlide].classList.add('quiz_div_slide_begin');enableButton(btnPreviousSlide,0);enableButton(btnNextSlide,0);if(quiz_rgp.isAnonymous){enableButton(btnStartQuiz,0);document.getElementById("quiz_pseudo").focus();}showDiv('quiz_div_message',false);showDiv('quiz_div_start',true);showDiv('quiz_btn_startQuiz',true);showDiv('quiz_btn_submitAnswers',false);showDiv('quiz_div_navigation',false);quizDivMessage.innerHTML="";}function showSlide_last(newSlide){objAllSlides[newSlide].classList.add('quiz_div_slide_begin');showFinalResults();quizard[currentSlide].reloadQuestion();stopTimer();enableButton(btnPreviousSlide,((quiz.allowedPrevious &&!quiz.useTimer)? 1:0));enableButton(btnNextSlide,0);showDiv('quiz_div_message',false);showDiv('quiz_div_start',true);showDiv('quiz_btn_startQuiz',false);showDiv('quiz_btn_submitAnswers',true);showDiv('quiz_div_navigation',false);}function showSlide_group(newSlide,firstSlide,allowedGotoNextslide){objAllSlides[newSlide].classList.add('quiz_div_slide_question');showDiv('quiz_div_navigation',true);if(!firstSlide){if(idQuizTimer==0)startTimer();}enableButton(btnPreviousSlide,((quiz.allowedPrevious && quizard[currentSlide].question.timer==0 &&!quiz.useTimer)?1:0));enableButton(btnNextSlide,((allowedGotoNextslide)? 1:0));enableButton(btnReloadAnswers,(quiz.showReloadAnswers ? 0:3));enableButton(btnShowGoodAnswers,(quiz.showGoodAnswers ? 0:3));enableButton(btnShowBadAnswers,(quiz.showBadAnswers ? 0:3));enableButton(btnGotoSlide,(quiz.showGoToSlide ? 1:3));}function showSlide_question(newSlide,secondSlide,allowedGotoNextslide){objAllSlides[newSlide].classList.add('quiz_div_slide_question');showDiv('quiz_div_navigation',true);if(secondSlide){if(idQuizTimer==0)startTimer();}enableButton(btnPreviousSlide,((quiz.allowedPrevious && quizard[currentSlide].question.timer==0 &&!quiz.useTimer)?1:0));enableButton(btnNextSlide,((allowedGotoNextslide)? 1:0));enableButton(btnReloadAnswers,(quiz.showReloadAnswers ? 1:3));enableButton(btnShowGoodAnswers,(quiz.showGoodAnswers ? 1:3));enableButton(btnShowBadAnswers,(quiz.showBadAnswers ? 1:3));enableButton(btnGotoSlide,(quiz.showGoToSlide ? 1:3));}function updateSlideTimer(){currentQuestion=quizard[currentSlide];var obSlideTimer=document.getElementById("question"+currentSlide+"-slideTimer");if(obSlideTimer)obSlideTimer.innerHTML=statsTotal.slideTimer;if(statsTotal.slideTimer >=0){btnNextSlide.innerHTML=`${quiz_messages.btnNext}[${statsTotal.slideTimer}]`;}else{btnNextSlide.innerHTML=quiz_messages.btnNext;}if(statsTotal.slideTimer < 0){clearInterval(idSlideTimer);idSlideTimer=0;showNextSlide();}statsTotal.slideTimer--;}function updateQuizTimer(){quizDivHorloge.innerHTML=formatChrono(statsTotal.cumul_timer++);}function startTimer(){idQuizTimer=setInterval(updateQuizTimer,1000);}function stopTimer(){clearInterval(idQuizTimer);}function testClick(){a=getRandomInt(100);alert("testClick:"+a);}function eventList_delItem(e){a=getRandomInt(100);alert("eventList_delItem:"+a);}function eventList_init(){tEvents.forEach((ev,evNumber)=>{ObEvent=document.getElementById(ev.id);ObEvent.addEventListener(ev.event,ev.fnc);})}function event_show_popup_result(currentSlide){var currentQuestion=quizard[currentSlide];if(!currentQuestion.isQuestion()){return false;}var divDisabledAll=document.getElementById('quiz_div_disabled_all');getStatistiques(currentQuestion);if(statsTotal.question_points==statsTotal.question_max){var emoji='emoji_icon_01.png';var message=quiz_messages.emoji_text_01;}else if(statsTotal.question_points==statsTotal.question_min){var emoji='emoji_icon_00.png';var message=quiz_messages.emoji_text_00;}else{var emoji='emoji_icon_02.png';var message=quiz_messages.emoji_text_02;}document.getElementById('quiz_popup_emoji_icon').src=`${quiz.url}/images/emoji/${emoji}`;document.getElementById('quiz_popup_emoji_text').innerHTML=message;document.getElementById('quiz_div_popup_quest').innerHTML=currentQuestion.question.question;msg2=quiz_messages.popupScore.replace("{points}",statsTotal.question_points);msg2=msg2.replace("{max}",statsTotal.question_max);document.getElementById('quiz_div_popup_points').innerHTML=msg2;msgScore=quiz_messages.popupScoreCumule.replace("{nbReponses}",statsTotal.question_number);msgScore=msgScore.replace("{nbQuestions}",statsTotal.quiz_questions);msgScore=msgScore.replace("{score}",statsTotal.cumul_score);msgScore=msgScore.replace("{total}",statsTotal.quiz_score_max);document.getElementById('quiz_div_popup_score').innerHTML=msgScore;var ans=currentQuestion.getAllReponses();document.getElementById('quiz_div_popup_answers').innerHTML=ans;divDisabledAll.style.visibility="visible";return true;}function change_theme(){var ttheme=["default","grey1","blue","blue2","green","green2","purple","purple2","red","red2","saumon","saumon2","yellow","yellow2","braun2","France","allBlack"];var index=getRandomInt(ttheme.length-1);return ttheme[index];}function showDiv(id,etat=0){var obRep=document.getElementById(id);if(!obRep)alert(`showDiv:|${id}| n'existe pas`);obRep.style.display=(etat==1)? "block":"none";}function showDivByName(name,etat=0){var obs=document.getElementsByName(name);obs.forEach((obDiv,index)=>{obDiv.style.display=(etat==1)? "block":"none";})}function shuffleMyquiz(){var Intro;var Result;var newQuestions=[];myQuestions.forEach((currentQuestion,idxQuestion)=>{if(currentQuestion.type=="Intro"){Intro=currentQuestion;}else if(currentQuestion.type=="Result"){Result=currentQuestion;}else{newQuestions.push(currentQuestion);}});if(quiz.shuffleQuestions)newQuestions=shuffleArray(newQuestions);newQuestions.unshift(Intro);newQuestions.push(Result);myQuestions=newQuestions;return true;}function enableButton(btn,etat,debug=false){if(debug){alert("enableButton:"+btn.id+"\netat="+etat);}switch(etat){case 0:btn.style.display='inline-block';btn.style.visibility="visible";btn.disabled='disabled';break;case 2:btn.style.visibility="hidden";break;case 3:btn.style.visibility="hidden";btn.style.display='none';break;case 1:default:btn.style.visibility="visible";btn.style.display='inline-block';btn.disabled='';break;}}function getMessage(message,message2="",sep="-"){if(message in quiz_messages){newMessage=quiz_messages[message];}else{newMessage=message;}if(message2!="" && message2 in quiz_messages){newMessage+=sep+quiz_messages[message2];}else if(message2!=""){newMessage+=sep+message2;}return newMessage;}function getMessage2(exp){for(key in quiz_messages){exp=exp.replaceAll("{"+key+"}",quiz_messages[key]);}return exp;}function updateOptions(){var ob;ob=document.getElementById("quiz-onclick");if(!ob)return false;quiz.onClickSimple=ob.checked==1;var ob=document.getElementById("quiz-answerBeforeNext");quiz.answerBeforeNext=ob.checked==1;ob=document.getElementById("quiz-allowedPrevious");quiz.allowedPrevious=ob.checked;ob=document.getElementById("quiz-allowedSubmit");quiz.allowedSubmit=(ob.checked==1)? 1:0;ob=document.getElementById("quiz-showResultAllways");quiz.showResultAllways=(ob.checked==1)? 1:0;showDiv("results",ob.checked);ob=document.getElementById("quiz-showReponses");quiz.showReponsesBottom=(ob.checked==1)? 1:0;showDiv('quiz_div_log',ob.checked);ob=document.getElementById("quiz-useTimer");quiz.useTimer=(ob.checked==1)? 1:0;ob=document.getElementById("quiz-showLog");quiz.showLog=(ob.checked==1)? 1:0;showDiv('quiz_div_log',ob.checked);return true;}const tEvents=[];shuffleMyquiz();buildQuiz();const quizDivAllSlides=document.getElementById('quiz_div_all_slides');const quizDivMessage=document.getElementById('quiz_div_message');const btnSubmit=document.getElementById('quiz_btn_submitAnswers');const btnPreviousSlide=document.getElementById('quiz_btn_previousSlide');const btnNextSlide=document.getElementById('quiz_btn_nextSlide');const btnStartQuiz=document.getElementById('quiz_btn_startQuiz');const btnReloadAnswers=document.getElementById('quiz_btn_reload_answers');const btnShowGoodAnswers=document.getElementById('quiz_btn_show_good_answers');const btnShowBadAnswers=document.getElementById('quiz_btn_show_bad_answers');const btnGotoSlide=document.getElementById('quiz_btn_goto_slide');const btnGotoSlideBegin=document.getElementById('quiz_btn_goto_slide_begin');const quizDivHorloge=document.getElementById('quiz_div_horloge');const QuizDivAnswersBottom=document.getElementById('quiz_div_answers_bottom');const quizDivLog=document.getElementById('quiz_div_log');const btnShowConsigne=document.getElementById('quiz_btn_showConsigne');btnSubmit.addEventListener('click',submitAnswers);btnPreviousSlide.addEventListener("click",showPreviousSlide);btnNextSlide.addEventListener("click",showNextSlide);btnStartQuiz.addEventListener("click",showNextSlide);btnReloadAnswers.addEventListener('click',reloadQuestion);btnShowGoodAnswers.addEventListener('click',showGoodAnswers);btnShowBadAnswers.addEventListener('click',showBadAnswers);btnGotoSlide.addEventListener('click',gotoSlide);btnGotoSlideBegin.addEventListener('click',gotoSlideBegin);quizDivAllSlides.addEventListener("click",showCurrentSlide);quizDivAllSlides.addEventListener("input",showCurrentSlide);const objAllSlides=document.querySelectorAll(".quiz_div_slide_main");let currentSlide=0;let idSlideTimer=0;let idQuizTimer=0;if(!quizIsStarted){showSlide(currentSlide);quizIsStarted=true;}})();