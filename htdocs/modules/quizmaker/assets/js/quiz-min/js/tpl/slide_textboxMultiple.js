class textboxMultiple extends quizPrototype{name='textboxMultiple';build(){var id=this.getName;var currentQuestion=this.question;var tHtml=[];tHtml.push(`<div id=${name}-famille style='text-align:left;'>`);for(var k=0;k < currentQuestion.answers.length;k++){var name=this.getId(k);tHtml.push(`<label>${getNumAlpha(k*1,currentQuestion.numbering,0)}:${currentQuestion.answers[k].caption}<br>`);tHtml.push(getHtmlTextbox2b(name,this.data.ans[k].nbInput,"","",""));tHtml.push(`</label><hr>`);}tHtml.push("</div>");return tHtml.join("\n");}prepareData(){var currentQuestion=this.question;this.data.ans=[];for(var k in currentQuestion.answers){var ans=[];ans.nbInput=currentQuestion.answers[k].inputs*1;ans.words=currentQuestion.answers[k].proposition.split(",");ans.points=currentQuestion.answers[k].points.split(",");var tWordsMinuscule=currentQuestion.answers[k].proposition.toLowerCase().split(",");for(var h=0;h < tWordsMinuscule.length;h++){tWordsMinuscule[h]=sanityseTextForComparaison(tWordsMinuscule[h]);}ans.points=padArray(ans.points,ans.words.length);ans.keyPoints=conbineArrayKeys(tWordsMinuscule,ans.points);this.data.ans.push(ans);}}computeScoresMinMaxByProposition(){var currentQuestion=this.question;for(var k in this.question.answers){var tPoints=this.question.answers[k].points.toString().split(',');tPoints.sort().reverse();for(var i=0;i < currentQuestion.answers[k].inputs*1;i++){this.scoreMaxiBP+=tPoints[i]*1;}}this.scoreMiniBP=0;return true;}computeScoresMinMaxInd(){}getScoreByProposition(answerContainer){var points=0;var currentQuestion=this.question;var id=this.getId(0);var name=this.getName();for(var k=0;k < currentQuestion.answers.length;k++){var tKeyPoints=this.data.ans[k].keyPoints;var obs=getObjectsByName(this.getId(k),"input");obs.forEach((obInput,index)=>{var key=sanityseTextForComparaison(obInput.value);if(key!='' && key in tKeyPoints)points+=tKeyPoints[key]*1;});}return points;}isInputOk(answerContainer){var currentQuestion=this.question;var bolOk=true;const selector=`input[name=question${currentQuestion.chrono}]`;var obs=getObjectsByName(this.getName(currentQuestion),"input");try{var minReponses=currentQuestion.options.minReponses;}catch(err){var minReponses=0;}obs.forEach((ob,index)=>{var reponse=ob.value.toLowerCase().trim();if(reponse.length < minReponses)bolOk=false;});return bolOk;}getAllReponses(flag=0){var currentQuestion=this.question;var tReponses=[];for(var k=0;k < currentQuestion.answers.length;k++){var tGroup=[];var tKeyPoints=sortArrayKey(this.data.ans[k].keyPoints,'a');for(var key in tKeyPoints){tGroup.push({'inputs':key,'points':tKeyPoints[key]});}tReponses.push(tGroup);}return formatArray2(tReponses,'=');}update(nameId,chrono){}reloadQuestion(){var currentQuestion=this.question;var id=this.getId(0);var name=this.getName();for(var k=0;k < currentQuestion.answers.length;k++){var obs=getObjectsByName(this.getId(k),"input");obs.forEach((obInput,index)=>{obInput.value="";});}return true;}showGoodAnswers(){var currentQuestion=this.question;var id=this.getId(0);var name=this.getName();for(var k=0;k < this.data.ans.length;k++){var tKeyPoints=shuffleArrayKeys(this.data.ans[k].keyPoints);var tReponses=[];for(var key in tKeyPoints){if(tKeyPoints[key] > 0)tReponses.push(key);}var obs=getObjectsByName(this.getId(k),"input");obs.forEach((obInput,index)=>{obInput.value=tReponses[index];});}return true;}showBadAnswers(){var currentQuestion=this.question;var id=this.getId(0);var name=this.getName();for(var k=0;k < this.data.ans.length;k++){var tKeyPoints=shuffleArrayKeys(this.data.ans[k].keyPoints);var tReponses=[];for(var key in tKeyPoints){if(tKeyPoints[key] <=0)tReponses.push(key);}var obs=getObjectsByName(this.getId(k),"input");obs.forEach((obInput,index)=>{obInput.value=(index < tReponses.length)? tReponses[index]:'';});}return true;}}